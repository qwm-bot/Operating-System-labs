# lab2：物理内存和页表
## 练习1
## 练习2
## 扩展练习Challenge
## 扩展练习Challenge
## 扩展练习Challenge：硬件的可用物理内存范围的获取方法（思考题）
> 如果 OS 无法提前知道当前硬件的可用物理内存范围，请问你有何办法让 OS 获取可用物理内存范围？
- **手工探测物理内存** 我们可以借鉴一下在没有SPD时，CPU探测内存条的相关信息的办法。向一块连续的区域上写入0x55，然后读取这一片区域的数据判断是否与写入的数据一致，然后再向这一片区域内写入0xAA,然后同样读取这片区域的数据判断是否和写入的一致，如果两次数据都一致，说明这块区域中的0和1是可以被程序员操纵的，大概率是一块内存。操作系统经过大范围这样的扫描，可以得到可用物理内存范围（但不一定百分百准确）。
## 实验中重要知识点
1. > 操作系统是怎样知道当前硬件的可用内存物理范围的？

- 在RISC-V中，由**OpenSBI**来完成。OpenSBI完成对于包括物理内存在内的各外设的扫描，将扫描结果以**DTB**的格式保存在物理内存中的某个地方，随后OpenSBI会将其地址保存在`a1`寄存器中。在操作系统的内核代码中，会从`a1`寄存器中读取设备树数据的存储地址，并将设备树数据读取出来，保存到全局变量`boot_dtb`中，后续利用`dtb_init`函数来读取设备树结构中存储的相关信息。
## 实验未涉及知识点